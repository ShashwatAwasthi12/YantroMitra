<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List of Students</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style type="text/css">
        .box {
            width: 90%;
            height: 200px;

            margin: 5%;
            align-content: center;

        }
    </style>

</head>

<body>

    <h2 align="center">Attendance for : <span id="dt" style="color: red"></span></h2><br><br>

    <% stds.forEach( (std)=>{ %>
        <form method="post" action="/attendance/<%= std._id %>">

            <div class="box" align="center">
                <input type="hidden" name="name" value="<%= std.name %>">
                <input type="hidden" name="id" value="<%= std._id %>">
                <input type="hidden" name="dates" id="dateinp<%= std._id %>">
                <table border="1" cellpadding="10px" align="center">
                    <tr>
                        <th><img src=<%= std.image %> width="100px" height="100px"></th>
                        <th colspan="3" style="font-size: 2em;">
                            <%= std._id %>
                        </th>
                    </tr>
                    <tr>
                        <th>PHYSICS ATTENDANCE </th>
                        <th>CHEMISTRY ATTENDANCE</th>
                        <th>MATHEMATICS ATTENDANCE</th>
                    </tr>
                    <tr>

                        <td><a id="pp<%= std._id %>" class="btn btn-success"
                                style="font-size: 2em; margin: 5px;">+</a>
                                <input type="hidden" name="ph"
                                id="ph<%= std._id %>" value="0">
                                <span id="phy<%= std._id %>"
                                style="font-size: 2em;margin: 5px;">0</span>
                                <a id="pm<%= std._id %>"class="btn btn-danger" style="font-size: 2em;margin: 5px;">-</a></td>


                        <td><a id="cp<%= std._id %>" class="btn btn-success" style="font-size: 2em;margin: 5px;">+</a>
                            <input type="hidden" name="ch" id="ch<%= std._id %>" value="0"><span id="chem<%= std._id %>"
                                style="font-size: 2em;margin: 5px;">0</span><a id="cm<%= std._id %>"
                                class="btn btn-danger" style="font-size: 2em;margin: 5px;">-</a></td>


                        <td><a id="mp<%= std._id %>" class="btn btn-success" style="font-size: 2em;margin: 5px;">+</a>
                            <input type="hidden" name="mt" id="mt<%= std._id %>" value="0"><span
                                id="maths<%= std._id %>" style="font-size: 2em;margin: 5px;">0</span><a
                                id="mm<%= std._id %>" class="btn btn-danger" style="font-size: 2em;margin: 5px;">-</a>
                        </td>

                    </tr>
                    <tr>
                        <td colspan="3"><button>Submit</button><br></td>
                    </tr>

                </table><br><br><br><br><br>
            </div>

        </form>
        <br>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#pp<%= std._id %>").click(function () {
                    var val = document.getElementById("ph<%= std._id %>").value;
                    var p = Number(val) + 1;
                    if (p < 0) {
                        p = 0;
                    }
                    if (p > 50) {
                        p = 50;
                    }
                    document.getElementById("ph<%= std._id %>").value = p;
                    document.getElementById("phy<%= std._id %>").innerHTML = p;
                });
                $("#pm<%= std._id %>").click(function () {
                    var valp = document.getElementById("ph<%= std._id %>").value;
                    var p = Number(valp) - 1;
                    if (p < 0) {
                        p = 0;
                    }
                    if (p > 50) {
                        p = 50;
                    }
                    document.getElementById("ph<%= std._id %>").value = p;
                    document.getElementById("phy<%= std._id %>").innerHTML = p;
                });
                $("#cp<%= std._id %>").click(function () {
                    var valc = document.getElementById("ch<%= std._id %>").value;
                    var c = Number(valc) + 1;
                    if (c < 0) {
                        c = 0;
                    }
                    if (c > 50) {
                        c = 50;
                    }
                    document.getElementById("ch<%= std._id %>").value = c;
                    document.getElementById("chem<%= std._id %>").innerHTML = c;
                });
                $("#cm<%= std._id %>").click(function () {
                    var valc = document.getElementById("ch<%= std._id %>").value;
                    var c = Number(valc) - 1;
                    if (c < 0) {
                        c = 0;
                    }
                    if (c > 50) {
                        c = 50;
                    }
                    document.getElementById("ch<%= std._id %>").value = c;
                    document.getElementById("chem<%= std._id %>").innerHTML = c;
                });
                $("#mp<%= std._id %>").click(function () {
                    var valm = document.getElementById("mt<%= std._id %>").value;
                    var m = Number(valm) + 1;
                    if (m < 0) {
                        m = 0;
                    }
                    if (m > 50) {
                        m = 50;
                    }
                    document.getElementById("mt<%= std._id %>").value = m;
                    document.getElementById("maths<%= std._id %>").innerHTML = m;
                });
                $("#mm<%= std._id %>").click(function () {
                    var valm = document.getElementById("mt<%= std._id %>").value;
                    var m = Number(valm) - 1;
                    if (m < 0) {
                        m = 0;
                    }
                    if (m > 50) {
                        m = 50;
                    }
                    document.getElementById("mt<%= std._id %>").value = m;
                    document.getElementById("maths<%= std._id %>").innerHTML = m;
                });
            });
            var d = new Date();
            var date = d.toLocaleDateString();
            document.getElementById('dt').innerHTML = date;
            document.getElementById('dateinp<%= std._id %>').value = date;


        </script>
        <% }) %>


</body>

</html>